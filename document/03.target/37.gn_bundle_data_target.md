# Chromium GN Bundle Data 타겟 가이드

`bundle_data` 타겟은 macOS 및 iOS 빌드에서 애플리케이션 번들(Application Bundle)에 포함될 리소스 파일들을 정의할 때 사용합니다. 이 타겟 자체는 파일을 즉시 복사하지 않으며, `create_bundle` 타겟이 이 데이터를 참조하여 실제 번들 구조를 생성할 때 사용됩니다.

## 1. 기본 구조 (Basic Structure)

```gn
bundle_data("my_resources") {
  sources = [ "image.png", "info.plist" ]
  outputs = [ "{{bundle_resources_dir}}/{{source_file_part}}" ]
}
```

## 2. 주요 변수 (Key Variables)

### `sources` (필수)
번들에 포함시킬 소스 파일들의 목록입니다.

### `outputs` (필수)
소스 파일들이 번들 내의 어느 위치로 복사될지 지정하는 패턴입니다.
*   반드시 **치환 패턴(Substitution Patterns)**을 사용해야 합니다.
*   `{{bundle_resources_dir}}`, `{{bundle_executable_dir}}` 등의 번들 전용 패턴을 사용하여 위치를 지정합니다.

## 3. 치환 패턴 (Substitutions)

`bundle_data`의 `outputs`에서 사용할 수 있는 주요 패턴입니다.

*   `{{bundle_resources_dir}}`: 번들의 리소스 디렉토리 (예: macOS의 `Contents/Resources`).
*   `{{bundle_executable_dir}}`: 번들의 실행 파일 디렉토리 (예: macOS의 `Contents/MacOS`).
*   `{{bundle_plugins_dir}}`: 플러그인 디렉토리.
*   `{{source_file_part}}`: 원본 파일명 (확장자 포함).

## 4. 사용 예시 (Usage Example)

`bundle_data`는 단독으로 사용되지 않고, `create_bundle` 타겟의 `deps`로 지정되어야 합니다.

```gn
# 1. 리소스 정의
bundle_data("assets") {
  sources = [ "icon.png", "en.lproj/Localizable.strings" ]
  outputs = [ "{{bundle_resources_dir}}/{{source_file_part}}" ]
}

# 2. 번들 생성
create_bundle("my_app") {
  product_type = "com.apple.product-type.application"
  
  bundle_root_dir = "$root_out_dir/my_app.app"
  bundle_contents_dir = "$bundle_root_dir/Contents"
  bundle_resources_dir = "$bundle_contents_dir/Resources"
  bundle_executable_dir = "$bundle_contents_dir/MacOS"

  deps = [ ":assets" ] # bundle_data 타겟을 의존성으로 추가
}
```

## 5. 주의사항

*   `bundle_data`는 파일을 복사하는 규칙을 정의할 뿐, 실제 복사는 `create_bundle` 타겟이 처리될 때 수행됩니다.
*   `outputs`는 리스트여야 하지만, 보통 하나의 패턴 문자열만 포함합니다.
