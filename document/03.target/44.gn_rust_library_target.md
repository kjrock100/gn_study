# Chromium GN Rust Library 타겟 가이드

`rust_library` 타겟은 Rust 소스 코드를 컴파일하여 **Rust 라이브러리 크레이트(`.rlib`)**를 생성하는 데 사용됩니다. 생성된 라이브러리는 주로 다른 Rust 타겟(`rust_library`, `rust_executable` 등)의 의존성으로 사용됩니다.

## 1. 기본 구조 (Basic Structure)

```gn
rust_library("my_crate") {
  crate_name = "my_crate"
  sources = [ "src/lib.rs" ]
  edition = "2021"
  deps = [ "//third_party/rust/serde" ]
}
```

## 2. 주요 변수 (Key Variables)

### `sources`
컴파일에 포함될 Rust 소스 파일 목록입니다.
*   **`crate_root`**: 크레이트의 진입점 파일(예: `src/lib.rs`)을 지정합니다. 지정하지 않으면 GN이 `sources` 목록에서 `lib.rs`를 찾아 자동으로 설정하거나, 타겟 이름을 기반으로 추론합니다.

### `crate_name`
컴파일될 크레이트의 이름입니다.
*   생략 시 타겟 이름(`target_name`)이 사용됩니다.
*   Rust 코드 내에서 `use my_crate;`와 같이 참조할 때 사용되는 이름입니다.

### `edition`
사용할 Rust 에디션을 지정합니다. (예: `"2021"`, `"2018"`)

### `deps`
이 크레이트가 의존하는 다른 타겟 목록입니다.
*   다른 `rust_library`를 의존하면 자동으로 `extern crate`로 링크됩니다.

### `aliased_deps`
의존성 타겟의 크레이트 이름을 변경하여 가져올 때 사용합니다. (예: 버전 충돌 해결이나 이름 단축)
```gn
aliased_deps = {
  "//third_party/rust/very_long_crate_name:lib" = "short_name"
}
```

### `configs`
`rustflags` 등을 정의한 설정 목록입니다.

## 3. Rust 타겟 종류 비교

GN은 용도에 따라 다양한 Rust 타겟을 제공합니다.

*   **`rust_library`**: `.rlib` 생성. Rust 타겟 간의 중간 의존성으로 사용됩니다.
*   **`rust_static_library`**: C/C++ 링커 호환 정적 라이브러리(`.a`/`.lib`) 생성. C++ 타겟에서 Rust 코드를 사용할 때 씁니다.
*   **`rust_shared_library`**: C/C++ 링커 호환 동적 라이브러리(`.so`/`.dll`) 생성.
*   **`rust_proc_macro`**: 절차적 매크로(Procedural Macro) 라이브러리 생성.
*   **`rust_executable`**: Rust 실행 파일 생성.

## 4. 사용 예시 (Usage Example)

```gn
rust_library("utils") {
  crate_name = "utils"
  sources = [
    "src/lib.rs",
    "src/string_helpers.rs",
  ]
  edition = "2021"
}
```
