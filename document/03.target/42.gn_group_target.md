# Chromium GN Group 타겟 가이드

`group` 타겟은 빌드 산출물(실행 파일, 라이브러리 등)을 직접 생성하지 않고, 여러 의존성(Dependencies)을 하나로 묶어 관리하기 위해 사용하는 **메타 타겟(Meta-target)**입니다.

## 1. 역할 (Role)

*   **의존성 집합**: 관련된 여러 타겟을 하나의 이름으로 묶어, 다른 타겟이 쉽게 의존할 수 있게 합니다.
*   **루트 타겟**: 빌드 시스템의 진입점(Entry point) 역할을 합니다. (예: `//:default`)
*   **조건부 의존성 처리**: 플랫폼이나 설정에 따라 달라지는 의존성을 하나의 타겟 이름 뒤에 숨길 수 있습니다.

## 2. 기본 구조 (Basic Structure)

```gn
group("tools") {
  deps = [
    "//tools/gn",
    "//tools/clang",
    "//tools/perf",
  ]
}
```

## 3. 주요 변수 (Key Variables)

### `deps`
이 그룹이 포함하는 타겟들의 목록입니다. `group` 타겟을 빌드하면, 이 리스트에 있는 모든 타겟이 빌드됩니다.

### `public_deps`
이 그룹을 의존하는 다른 타겟에게 전파되어야 하는 의존성입니다.
*   `group` 타겟은 헤더 파일이나 컴파일 설정이 없으므로, `deps`와 `public_deps`의 동작 차이가 크지 않을 수 있습니다. 하지만 의존성 체인을 명확히 하기 위해, 이 그룹을 통해 노출되는 타겟은 `public_deps`로 지정하는 것이 좋습니다.

### `data_deps`
런타임에 필요한 데이터나 실행 파일을 지정합니다.

### `testonly`
`true`로 설정하면, 이 그룹은 다른 `testonly` 타겟에서만 의존할 수 있습니다. 테스트 타겟들을 묶을 때 필수적입니다.

## 4. 사용 예시 (Usage Examples)

### 4.1. 루트 타겟 (Root Target)
프로젝트의 최상위 `BUILD.gn` 파일에는 보통 `default`라는 이름의 그룹이 있어, `ninja -C out/Default` 명령 실행 시 기본적으로 빌드할 대상들을 지정합니다.

```gn
# //BUILD.gn
group("default") {
  testonly = true
  deps = [
    "//app:my_browser",
    "//app:my_tests",
    "//tools:all_tools",
  ]
}
```

### 4.2. 플랫폼별 의존성 분기
운영체제에 따라 다른 구현체를 사용해야 할 때, `group`을 사용하여 추상화할 수 있습니다.

```gn
group("base_impl") {
  if (is_win) {
    public_deps = [ "//base/win:base_win" ]
  } else if (is_linux) {
    public_deps = [ "//base/linux:base_linux" ]
  } else {
    public_deps = [ "//base/posix:base_posix" ]
  }
}

executable("app") {
  # app은 플랫폼을 신경 쓰지 않고 base_impl만 의존하면 됨
  deps = [ ":base_impl" ]
}
```

### 4.3. 헤더 파일 모음 (Header-only Library)
헤더 파일만 있는 라이브러리의 경우 `source_set` 대신 `group`을 사용할 수도 있지만, 보통은 `source_set`을 더 선호합니다. 하지만 외부 라이브러리의 헤더 경로만 설정(`public_configs`)하고 실제 컴파일은 필요 없는 경우 `group`이 유용할 수 있습니다.

```gn
group("external_lib") {
  public_configs = [ ":external_lib_config" ]
}
```

## 5. 주의사항

*   `group` 타겟은 `sources` 변수를 가질 수는 있지만(IDE 프로젝트 생성 용도 등), 이를 컴파일하거나 링크하지 않습니다.
*   `configs` 변수는 `group` 타겟 자체에는 적용되지 않습니다(컴파일 단계가 없으므로). 하지만 `public_configs`는 의존하는 타겟으로 전파됩니다.
