# Chromium GN 타겟 (Targets) 가이드

GN(Generate Ninja) 빌드 시스템에서 **타겟(Target)**은 빌드 그래프의 노드(Node)를 형성하는 기본 단위입니다. 각 타겟은 소스 코드를 컴파일하여 실행 파일이나 라이브러리를 생성하거나, 스크립트를 실행하고, 다른 타겟들을 그룹화하는 역할을 합니다.

## 1. 주요 타겟 유형 (Target Types)

GN은 다양한 내장 타겟 함수를 제공합니다.

### `executable`
실행 가능한 프로그램(Binary)을 생성합니다.
```gn
executable("hello_world") {
  sources = [ "hello.cc" ]
  deps = [ "//base" ]
}
```

### `static_library`
정적 라이브러리(`.a` 또는 `.lib`)를 생성합니다.
```gn
static_library("my_lib") {
  sources = [ "lib.cc", "lib.h" ]
}
```

### `shared_library`
동적 라이브러리(`.so`, `.dll`, `.dylib`)를 생성합니다.
```gn
shared_library("my_shared") {
  sources = [ "shared.cc" ]
  defines = [ "MY_SHARED_IMPLEMENTATION" ]
}
```

### `source_set` (권장)
소스 파일들을 컴파일하여 객체 파일(`.o`)들의 집합으로 만듭니다.
*   **특징**: 중간 라이브러리 파일(`.a`)을 생성하지 않으므로 링킹 속도가 빠릅니다.
*   **용도**: 최종 실행 파일이나 공유 라이브러리에 링크될 때 사용됩니다. Chromium 프로젝트에서 가장 선호되는 방식입니다.

```gn
source_set("utils") {
  sources = [ "util.cc", "util.h" ]
}
```

### `group`
빌드 산출물을 생성하지 않고, 여러 의존성을 하나로 묶을 때 사용합니다. 메타 타겟(Meta-target)이라고도 합니다.
```gn
group("all_tests") {
  testonly = true
  deps = [
    ":unit_tests",
    ":browser_tests",
  ]
}
```

### `action`
스크립트(주로 Python)를 실행하여 파일을 생성하는 커스텀 빌드 단계를 정의합니다.
```gn
action("generate_header") {
  script = "gen.py"
  sources = [ "input.data" ]
  outputs = [ "$target_gen_dir/output.h" ]
  args = [ "--input", "input.data", "--output", "output.h" ]
}
```

### `copy`
파일을 복사합니다.
```gn
copy("copy_config") {
  sources = [ "config.json" ]
  outputs = [ "$root_out_dir/config.json" ]
}
```

## 2. 주요 변수 (Common Variables)

타겟 정의 블록 내부에서 사용하는 주요 변수들입니다.

### 소스 및 입력
*   **`sources`**: 컴파일할 소스 파일 목록입니다.
*   **`inputs`**: (선택적) 컴파일 단계에서 필요하지만 소스 파일은 아닌 파일들(예: `action`의 입력)입니다. 이 파일들이 변경되면 리빌드가 트리거됩니다.

### 의존성 (Dependencies)
*   **`deps`**: 현재 타겟이 링크하거나 사용하는 의존성입니다. (Private Dependency)
*   **`public_deps`**: 현재 타겟을 사용하는 다른 타겟에게도 전파되어야 하는 의존성입니다. (Public Dependency)
    *   예: 헤더 파일(`my_lib.h`) 내에서 다른 라이브러리의 헤더(`base/logging.h`)를 include 하는 경우.
*   **`data_deps`**: 런타임에만 필요한 의존성입니다. (예: 테스트 데이터, 플러그인)

### 설정 (Configs)
*   **`configs`**: 컴파일러 플래그, include 경로 등을 정의한 설정 목록입니다. 기본값(`set_defaults`)에 추가하거나 제거할 수 있습니다.
*   **`public_configs`**: 이 타겟을 의존하는 다른 타겟들에게 적용될 설정입니다. (예: include 경로 전파)

### 기타
*   **`testonly`**: `true`로 설정되면, 이 타겟은 다른 `testonly` 타겟에서만 의존할 수 있습니다. (프로덕션 코드와 테스트 코드 분리)
*   **`visibility`**: 이 타겟을 의존할 수 있는 다른 타겟들을 제한합니다. (기본값은 모든 곳에서 접근 가능 `*`)
    *   예: `visibility = [ "//chrome/*" ]`
*   **`defines`**: 전처리기 매크로 정의 (`-DNAME=VALUE`).
*   **`include_dirs`**: 헤더 파일 검색 경로 (`-Ipath`).
*   **`cflags`**: C/C++ 컴파일러 플래그.
