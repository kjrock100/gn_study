# Chromium GN 조건문 (Conditionals) 가이드

GN(Generate Ninja)의 조건문은 빌드 설정을 플랫폼(OS), 아키텍처(CPU), 또는 사용자 정의 인자에 따라 동적으로 변경하는 데 사용됩니다.

## 1. 기본 문법 (Basic Syntax)

C++이나 Python과 유사한 `if`, `else if`, `else` 구조를 사용합니다. 조건식의 결과는 반드시 불리언(Boolean) 타입이어야 합니다.

```gn
if (is_win) {
  sources += [ "win_impl.cc" ]
} else if (is_linux) {
  sources += [ "linux_impl.cc" ]
} else {
  sources += [ "default_impl.cc" ]
}
```

## 2. 연산자 (Operators)

조건식에서 사용할 수 있는 논리 및 비교 연산자입니다.

*   `==`: 값이 같음
*   `!=`: 값이 다름
*   `!`: 논리 부정 (NOT)
*   `&&`: 논리 곱 (AND)
*   `||`: 논리 합 (OR)

```gn
if (is_linux && target_cpu == "x64") {
  defines = [ "LINUX_X64" ]
}

if (!is_debug) {
  configs += [ "//build/config:optimize" ]
}
```

## 3. 주요 조건 변수 (Common Condition Variables)

Chromium 빌드 환경에서 자주 사용되는 내장 변수들입니다.

*   `is_win`, `is_mac`, `is_linux`, `is_android`, `is_ios`: 대상 운영체제 확인.
*   `is_debug`: 디버그 빌드 여부 (`true`이면 디버그, `false`이면 릴리즈).
*   `target_cpu`: 타겟 CPU 아키텍처 ("x64", "x86", "arm", "arm64").
*   `current_os`, `current_cpu`: 현재 툴체인의 OS 및 CPU (크로스 컴파일 시 중요).

```gn
if (target_cpu == "arm64") {
  cflags += [ "-march=armv8-a" ]
}
```

## 4. 스코프와 변수 정의 (Scope & Definition)

GN의 `if` 문은 새로운 스코프를 생성하지 않고 현재 스코프에서 실행됩니다. 하지만, 조건문 내부에서 *처음* 정의된 변수를 조건문 밖에서 사용할 때는 주의해야 합니다. 조건이 거짓일 경우 해당 변수가 정의되지 않아 에러가 발생할 수 있습니다.

### 안전한 변수 사용 패턴
변수를 조건문 밖에서 미리 선언(초기화)하는 것이 좋습니다.

```gn
# 권장하는 방식: 기본값 설정
use_custom_lib = false

if (is_win) {
  use_custom_lib = true
}

if (use_custom_lib) {
  deps += [ ":custom_lib" ]
}
```

## 5. 리스트 비교

GN에서는 리스트 자체를 불리언으로 평가할 수 없습니다(Python과 다름). 리스트가 비어있는지 확인하려면 빈 리스트(`[]`)와 비교해야 합니다.

```gn
my_list = []

# if (my_list) { ... }  # Error!

if (my_list != []) {
  print("List is not empty")
}
```
