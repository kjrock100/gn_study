# Chromium GN 리스트 (Lists) 가이드

GN(Generate Ninja)에서 리스트(List)는 소스 파일 목록, 의존성 목록, 컴파일러 플래그 등을 관리하는 데 가장 빈번하게 사용되는 핵심 자료형입니다.

## 1. 리스트 생성 (Creation)

대괄호 `[]`를 사용하여 생성하며, 요소들은 쉼표 `,`로 구분합니다. 마지막 요소 뒤에 쉼표를 허용합니다(Trailing comma).

```gn
empty = []
my_list = [ "a", "b", "c" ]
numbers = [ 1, 2, 3 ]

# 여러 줄로 작성 시 가독성이 좋습니다.
sources = [
  "main.cc",
  "utils.cc",
]
```

## 2. 리스트 연산 (Operations)

GN은 리스트 조작을 위해 `+`, `-`, `+=`, `-=` 연산자를 제공합니다.

### 추가 (`+`, `+=`)
두 리스트를 합칩니다. `+=`는 변수 자체를 수정합니다.

```gn
a = [ "first" ]
b = [ "second" ]
c = a + b  # [ "first", "second" ]

a += [ "third" ] # a는 이제 [ "first", "third" ]
```

**주의:** 단일 요소를 추가할 때도 반드시 리스트 형태(`[]`)로 만들어야 합니다.
```gn
# sources += "file.cc"  # Error! (String과 List는 더할 수 없음)
sources += [ "file.cc" ] # OK
```

### 제거 (`-`, `-=`)
리스트에서 특정 요소를 제거합니다. 값이 일치하는 **모든** 요소를 제거합니다.

```gn
my_list = [ "a", "b", "c", "b" ]
my_list -= [ "b" ] # [ "a", "c" ] ("b"가 모두 제거됨)
```

## 3. 요소 접근 (Accessing Elements)

GN은 0부터 시작하는 인덱스를 사용하여 리스트 요소의 값을 읽을 수 있습니다.

```gn
my_list = [ "a", "b", "c" ]
first = my_list[0]  # "a"
```

**주의:** 인덱스를 사용하여 리스트의 값을 직접 수정(`my_list[0] = "x"`)하는 것은 지원하지 않습니다. 리스트 수정은 연산자(`+=`, `-=`)나 재할당을 통해서만 가능합니다.

## 4. 반복문 (Iteration)

`foreach` 문을 사용하여 리스트의 각 요소를 순회할 수 있습니다.

```gn
list = [ "a", "b", "c" ]
foreach(i, list) {
  print(i)
}
```

## 5. 주요 활용 예시

Chromium 빌드 시스템에서 리스트는 주로 다음과 같은 내장 변수들을 설정할 때 사용됩니다.

*   `sources`: 컴파일할 소스 파일 목록 (`.cc`, `.h`, `.mm` 등)
*   `deps`: 현재 타겟이 의존하는 다른 타겟 목록
*   `public_deps`: 외부로 전파되는 의존성 목록
*   `cflags`, `ldflags`: 컴파일러 및 링커 플래그 목록
*   `defines`: 전처리기 매크로 정의 목록

```gn
executable("my_app") {
  sources = [ "main.cc" ]
  deps = [ "//base:base" ]
  
  if (is_win) {
    sources += [ "win_main.cc" ]
    defines = [ "WINDOWS_DESKTOP" ]
  }
}
```
