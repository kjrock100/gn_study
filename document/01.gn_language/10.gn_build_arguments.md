# Chromium GN 빌드 인자 (Build Arguments) 가이드

GN(Generate Ninja)의 **빌드 인자(Build Arguments)**는 사용자가 빌드 시점에 외부에서 값을 설정하여 빌드 구성을 변경할 수 있게 해주는 기능입니다. 이를 통해 소스 코드를 수정하지 않고도 디버그/릴리즈 모드 전환, 특정 기능 활성화/비활성화 등을 수행할 수 있습니다.

## 1. 인자 선언 (Declaring Arguments)

`declare_args()` 함수를 사용하여 빌드 인자를 선언하고 기본값을 지정합니다.

```gn
declare_args() {
  enable_telemetry = true
  use_custom_allocator = false
  debug_level = 0
}
```

*   이 블록 내에서 선언된 변수들은 외부에서 덮어쓸 수 있는 "인자"가 됩니다.
*   만약 사용자가 값을 지정하지 않으면, 여기서 설정한 기본값이 사용됩니다.
*   `declare_args`는 여러 번 호출될 수 있으며, 주로 `.gni` 파일이나 `BUILD.gn` 파일의 상단에 위치합니다.

## 2. 인자 사용 (Using Arguments)

선언된 인자는 일반 변수처럼 사용할 수 있습니다.

```gn
if (enable_telemetry) {
  sources += [ "telemetry.cc" ]
}

if (debug_level > 1) {
  defines = [ "VERBOSE_LOGGING" ]
}
```

## 3. 인자 값 설정 (Setting Arguments)

사용자는 `gn args` 명령어를 통해 빌드 디렉토리별로 인자 값을 설정할 수 있습니다.

### 3.1. 편집기 사용
```bash
gn args out/Default
```
위 명령어를 실행하면 시스템의 기본 텍스트 편집기가 열리며, `args.gn` 파일을 수정할 수 있습니다.

```gn
# args.gn 파일 내용 예시
is_debug = false
enable_telemetry = false
target_cpu = "x64"
```

### 3.2. 커맨드 라인 사용 (`--args`)
`gn gen` 명령 실행 시 `--args` 플래그를 사용하여 직접 값을 전달할 수도 있습니다. CI(Continuous Integration) 환경에서 유용합니다.

```bash
gn gen out/Release --args="is_debug=false enable_telemetry=false"
```

### 3.3. 값 확인
현재 설정된 인자 값들을 확인하려면 `gn args --list`를 사용합니다.

```bash
gn args out/Default --list
```

## 4. 스코프와 오버라이드 (Scope & Overrides)

*   **변수 우선순위**: `declare_args` 블록 내부의 값은 기본값일 뿐입니다. 사용자가 `args.gn` 등을 통해 설정한 값이 항상 우선합니다.
*   **재정의 불가**: 일반 변수와 달리, 빌드 인자로 선언된 변수는 빌드 파일 내에서 `variable = value` 형태로 값을 변경하려고 하면 에러가 발생하거나 무시될 수 있습니다 (스코프에 따라 다름). 인자 값은 외부에서만 제어하는 것이 원칙입니다.

## 5. 모범 사례 (Best Practices)

*   **이름 충돌 방지**: 전역적으로 사용되므로 변수 이름이 겹치지 않도록 주의해야 합니다. 보통 프로젝트나 모듈 이름을 접두어로 사용합니다 (예: `v8_enable_inspector`).
*   **`.gni` 파일 활용**: 여러 `BUILD.gn` 파일에서 공통으로 사용하는 인자는 별도의 `.gni` 파일에 모아두고 `import`하여 사용하는 것이 좋습니다.

```gn
# build/config/features.gni
declare_args() {
  enable_doom_mode = false
}

# src/BUILD.gn
import("//build/config/features.gni")
```
