# Chromium GN 라벨 (Labels) 가이드

GN(Generate Ninja)에서 **라벨(Label)**은 빌드 그래프 내의 특정 타겟(Target), 설정(Config), 또는 툴체인(Toolchain)을 식별하는 고유한 이름(Identifier)입니다. `deps`, `public_deps`, `configs` 등에서 대상을 참조할 때 사용됩니다.

## 1. 기본 구조 (Basic Structure)

완전한 라벨(Fully qualified label)은 다음과 같은 형식을 가집니다.

`"//<디렉토리 경로>:<타겟 이름>"`

*   **`//`**: 소스 트리의 루트(Source Root)를 의미합니다.
*   **`<디렉토리 경로>`**: `BUILD.gn` 파일이 위치한 디렉토리 경로입니다.
*   **`:`**: 디렉토리 경로와 타겟 이름을 구분하는 구분자입니다.
*   **`<타겟 이름>`**: `BUILD.gn` 파일 내에서 정의된 타겟(`executable`, `source_set` 등)의 이름입니다.

```gn
"//base:base"
"//chrome/browser:browser"
"//third_party/icu:icui18n"
```

## 2. 라벨 축약 규칙 (Shortcuts)

GN은 가독성을 높이고 입력을 줄이기 위해 다양한 축약형을 지원합니다.

### 암시적 타겟 이름 (Implicit Target Name)
타겟 이름이 마지막 디렉토리 이름과 동일한 경우, 콜론과 타겟 이름을 생략할 수 있습니다.

*   `//base:base`  ->  `//base`
*   `//net:net`    ->  `//net`

### 상대 경로 라벨 (Relative Labels)
현재 `BUILD.gn` 파일 내에 정의된 타겟을 참조할 때는 경로를 생략하고 콜론(`:`)으로 시작할 수 있습니다.

*   `//foo/bar:baz` (현재 위치가 `//foo/bar`인 경우) -> `:baz`

## 3. 툴체인 라벨 (Toolchain Labels)

일반적으로 타겟은 현재 컨텍스트의 기본 툴체인(Default Toolchain)으로 빌드됩니다. 하지만 크로스 컴파일이나 호스트 도구 빌드 등을 위해 특정 타겟을 다른 툴체인으로 빌드해야 할 경우, 라벨 뒤에 괄호`()`를 사용하여 툴체인을 명시할 수 있습니다.

`"//<path>:<name>(<toolchain_label>)"`

```gn
# 현재 타겟을 호스트 툴체인(빌드 머신용)으로 빌드
deps = [ "//tools/my_generator:generator(//build/toolchain/linux:clang_x64)" ]

# 내장 변수 host_toolchain 사용 (권장)
deps = [ "//tools/my_generator:generator($host_toolchain)" ]
```

## 4. 예제 (Examples)

```gn
executable("my_app") {
  deps = [
    ":internal_helper",      # 현재 파일 내의 타겟 (Relative)
    "//base",                # //base:base 와 동일 (Implicit)
    "//ui/gfx:geometry",     # 다른 디렉토리의 특정 타겟 (Absolute)
    "//tools/gn($host_toolchain)", # 호스트용으로 빌드된 도구 (Toolchain specified)
  ]
}

source_set("internal_helper") {
  # ...
}
```

## 5. 주의사항

*   **유효 문자**: 라벨에는 알파벳, 숫자, `+`, `_`, `.`, `-`, `/` 만 사용할 수 있습니다.
*   **파일 참조 불가**: 라벨은 타겟을 가리키는 식별자입니다. `sources` 리스트에 들어가는 파일 경로(`src/main.cc`)와는 다릅니다.
