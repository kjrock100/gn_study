# Chromium GN 변수 (Variables) 가이드

GN(Generate Ninja)은 동적 타이핑(Dynamically Typed) 언어입니다. 변수는 선언 시 별도의 타입 지정이 필요 없으며, 할당되는 값에 따라 타입이 결정됩니다.

## 1. 기본 자료형 (Data Types)

GN은 다음과 같은 기본 자료형을 지원합니다.

### Boolean
참(`true`) 또는 거짓(`false`) 값을 가집니다.
```gn
use_goma = true
is_debug = false
```

### Integer
부호 있는 64비트 정수입니다.
```gn
optimization_level = 2
```

### String
큰따옴표(`"`)로 묶인 문자열입니다. 역슬래시(`\`)를 이스케이프 문자로 사용합니다.
변수 확장을 지원합니다 (`$var` 또는 `${var}`).

```gn
my_name = "world"
greeting = "Hello, $my_name"  # "Hello, world"
path = "${root_gen_dir}/output.txt"
```

### List
대괄호(`[]`)로 묶인 값들의 목록입니다. 리스트는 GN에서 가장 중요한 자료형 중 하나입니다.

```gn
my_list = [ "a", "b", "c" ]
empty_list = []
```

### Scope
키-값 쌍을 저장하는 딕셔너리 형태의 자료형입니다. 주로 템플릿의 `invoker` 등에서 볼 수 있습니다.

```gn
my_scope = {
  name = "foo"
  id = 123
}
```

## 2. 변수 조작 및 연산

### 할당 및 수정
*   `=`: 변수에 값을 할당합니다. 이미 존재하는 변수를 덮어씁니다.
*   `+=`: 리스트에 요소를 추가하거나, 정수 값을 더합니다. (리스트 병합 시 주로 사용)
*   `-=`: 리스트에서 요소를 제거하거나, 정수 값을 뺍니다.

```gn
sources = [ "main.cc" ]
sources += [ "util.cc" ]  # [ "main.cc", "util.cc" ]
sources -= [ "main.cc" ]  # [ "util.cc" ]
```

**주의:** 리스트 연산 시 `+=`는 새 리스트를 생성하여 할당하는 방식이므로, 복사본이 생성됩니다.

## 3. 스코프 (Scope)와 실행 컨텍스트

GN의 변수는 렉시컬 스코프(Lexical Scope)를 따릅니다.

*   파일 내에서 정의된 변수는 해당 파일 내에서만 유효합니다.
*   블록(`{ ... }`) 내부에서 정의된 변수는 블록 밖으로 나가지 않습니다.
*   `import`를 통해 `.gni` 파일을 가져오면 해당 파일의 변수들이 현재 스코프로 들어옵니다.

## 4. 주요 내장 변수 (Built-in Variables)

GN은 빌드 환경 구성을 위해 미리 정의된 변수들을 제공합니다.

### 시스템 정보
*   `host_os`: GN이 실행되고 있는 호스트 OS (e.g., "linux", "mac", "win").
*   `host_cpu`: 호스트의 CPU 아키텍처.
*   `current_os`: 현재 빌드 타겟이 실행될 OS.
*   `current_cpu`: 현재 빌드 타겟의 CPU 아키텍처.

### 타겟 관련 변수
타겟(`executable`, `source_set` 등) 내부에서 사용되는 변수입니다.
*   `target_name`: 현재 정의 중인 타겟의 이름.
*   `sources`: 컴파일할 소스 파일 리스트.
*   `deps`: 의존성 타겟 리스트.
*   `public_deps`: 공개 의존성 타겟 리스트.
*   `cflags`, `defines`, `include_dirs`: 컴파일러 플래그 및 설정.

### 디렉토리 경로
*   `//`: 소스 트리의 루트 디렉토리 (Source Root).
*   `root_build_dir`: 빌드 결과물이 생성되는 루트 디렉토리 (예: `out/Default`).
*   `root_gen_dir`: 생성된 코드(Generated Code)가 위치하는 루트 디렉토리.
*   `target_gen_dir`: 현재 타겟을 위한 생성 파일 디렉토리.
