# Chromium GN Clean 명령어 가이드

`gn clean`은 빌드 디렉토리에서 빌드 산출물(객체 파일, 실행 파일 등)과 Ninja 빌드 파일을 삭제하여 깨끗한 상태로 만드는 명령어입니다.

## 1. 기본 사용법 (Basic Usage)

```bash
gn clean <out_dir>
```

*   **예시**:
    ```bash
    gn clean out/Default
    ```

## 2. 특징 및 동작 원리

`gn clean`은 단순한 디렉토리 삭제(`rm -rf`)와는 다르게 동작합니다.

1.  **빌드 산출물 삭제**: 컴파일된 `.o` 파일, 라이브러리, 실행 파일 등을 모두 삭제합니다.
2.  **Ninja 파일 삭제**: `build.ninja` 및 툴체인 관련 `.ninja` 파일들을 삭제합니다.
3.  **설정 보존**: **`args.gn` 파일은 삭제하지 않습니다.**
    *   이것이 가장 중요한 특징입니다. 사용자가 설정한 빌드 인자(Build Arguments)는 유지되므로, 다시 `gn args`를 실행하여 설정할 필요가 없습니다.

## 3. `rm -rf` 와의 차이점

| 명령어 | 동작 | `args.gn` 보존 여부 | 재빌드 준비 |
| :--- | :--- | :--- | :--- |
| `gn clean out/Default` | 빌드 산출물만 삭제 | **O (보존됨)** | `ninja` 실행 시 자동으로 파일 재생성 후 빌드 |
| `rm -rf out/Default` | 디렉토리 전체 삭제 | X (삭제됨) | `gn gen` 및 `gn args` 설정부터 다시 해야 함 |

## 4. 언제 사용하나요?

*   **빌드 오류 해결**: 증분 빌드(Incremental Build)가 꼬여서 알 수 없는 링크 에러나 컴파일 에러가 발생할 때, 클린 빌드를 수행하기 위해 사용합니다.
*   **디스크 공간 확보**: 빌드 산출물이 너무 많은 공간을 차지할 때, 설정은 유지하면서 공간을 비우고 싶을 때 사용합니다.
*   **브랜치 변경**: 소스 코드의 구조가 크게 바뀌는 브랜치로 체크아웃했을 때, 이전 빌드 잔여물이 문제를 일으키는 것을 방지하기 위해 사용합니다.

## 5. 실행 후 빌드

`gn clean`을 실행한 직후에는 별도로 `gn gen`을 실행할 필요가 없습니다. Ninja를 바로 실행하면, GN이 `args.gn`이 존재하는 것을 감지하고 자동으로 빌드 파일(`build.ninja`)을 재생성한 뒤 컴파일을 시작합니다.

```bash
gn clean out/Default
ninja -C out/Default chrome
```
