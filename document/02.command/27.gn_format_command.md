# Chromium GN Format 명령어 가이드

`gn format`은 GN 빌드 파일(`.gn`, `.gni`)의 소스 코드를 표준 스타일 가이드에 맞춰 자동으로 정렬해주는 도구입니다. `gofmt`나 `clang-format`과 유사하게 동작하며, 프로젝트 전체에서 일관된 코드 스타일을 유지하는 데 필수적입니다.

## 1. 기본 사용법 (Basic Usage)

```bash
gn format <file_path>...
```

*   **단일 파일 포맷팅**:
    ```bash
    gn format BUILD.gn
    ```
    기본적으로 지정된 파일을 **제자리에서(in-place)** 수정합니다. 즉, 포맷팅된 내용으로 원본 파일을 덮어씁니다.

*   **여러 파일 포맷팅**:
    ```bash
    gn format src/BUILD.gn tools/my_tool.gni
    ```

## 2. 주요 옵션 (Options)

*   **`--dry-run`**: 파일을 실제로 수정하지 않고, 포맷팅이 필요한지 여부만 확인합니다. 포맷팅이 필요하면 종료 코드 1을, 이미 완벽하면 0을 반환합니다. CI(Continuous Integration) 시스템에서 스타일 검사를 수행할 때 유용합니다.
    ```bash
    gn format --dry-run BUILD.gn
    ```
*   **`--stdin`**: 파일 경로 대신 표준 입력(stdin)으로 코드를 받아 포맷팅된 결과를 표준 출력(stdout)으로 내보냅니다. 에디터 플러그인 등에서 파이프라인으로 연결하여 사용할 때 주로 쓰입니다.
*   **`--dump-tree`**: 파싱된 추상 구문 트리(AST)를 출력합니다. 주로 GN 개발자나 파서 디버깅 용도로 사용됩니다.

## 3. 스타일 규칙 (Style Rules)

`gn format`은 내장된 규칙을 따르며, 사용자가 설정을 변경할 수 있는 옵션은 거의 없습니다. 이는 논쟁을 줄이고 프로젝트 전체의 통일성을 강제하기 위함입니다.

*   **들여쓰기**: 스페이스 2칸을 사용합니다.
*   **리스트 정렬**: `sources`, `deps` 등의 리스트 내부는 알파벳 순서로 자동 정렬됩니다.
    *   단, 주석으로 분리된 그룹은 서로 섞이지 않습니다.
*   **Trailing Comma**: 여러 줄로 작성된 리스트의 마지막 요소 뒤에는 항상 쉼표를 추가합니다.

## 4. 예시 (Example)

**변경 전 (Before):**
```gn
executable("test"){sources=["b.cc","a.cc"] deps=[":lib"]}
```

**`gn format` 실행 후 (After):**
```gn
executable("test") {
  sources = [
    "a.cc",
    "b.cc",
  ]
  deps = [ ":lib" ]
}
```
