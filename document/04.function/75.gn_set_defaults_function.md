# Chromium GN set_defaults 함수 가이드

`set_defaults` 함수는 특정 타겟 유형(`executable`, `shared_library` 등)에 대한 기본 변수 값을 설정하는 데 사용됩니다. 이는 주로 빌드 구성 파일(`BUILDCONFIG.gn`)에서 모든 타겟에 공통적인 컴파일러 플래그나 설정을 일괄적으로 적용할 때 유용합니다.

## 1. 역할 (Role)

`set_defaults`는 특정 타겟 타입이 생성될 때마다, 해당 타겟의 스코프에 미리 변수들을 설정해두는 역할을 합니다. 이를 통해 프로젝트 전체에 일관된 기본 설정을 강제하고, 개별 `BUILD.gn` 파일의 중복을 줄일 수 있습니다.

## 2. 기본 문법 (Basic Syntax)

```gn
set_defaults(target_type_string) {
  variable_name = value
  # ...
}
```

*   **`target_type_string`**: 기본값을 설정할 타겟 유형의 이름입니다. (예: `"executable"`, `"static_library"`, `"source_set"`)
*   **블록(`{}`) 내부**: 해당 타겟이 생성될 때 기본적으로 할당될 변수들을 정의합니다.

## 3. 작동 방식 (How it works)

GN이 `executable("my_app") { ... }`과 같은 타겟 정의를 만나면 다음과 같은 순서로 처리합니다.

1.  타겟을 위한 새로운 스코프를 생성합니다.
2.  `set_defaults("executable")`로 정의된 변수들을 이 스코프에 복사합니다.
3.  타겟 정의 블록(`{ ... }`) 내부의 코드를 실행합니다. 이때 사용자가 정의한 값이 기본값을 덮어쓰거나 수정(`+=`, `-=`)할 수 있습니다.

## 4. 사용 예시 (Usage in `BUILDCONFIG.gn`)

주로 `//build/config/BUILDCONFIG.gn` 파일에서 모든 타겟에 공통 `configs`를 적용하기 위해 사용됩니다.

```gn
# BUILDCONFIG.gn

# 모든 타겟에 적용할 기본 설정 리스트 구성
_default_configs = [
  "//build/config:compiler_defaults",
  "//build/config:no_exceptions",
]

if (is_debug) {
  _default_configs += [ "//build/config:debug" ]
}

# executable 타겟에 대한 기본값 설정
set_defaults("executable") {
  configs = _default_configs
}

# static_library 타겟에 대한 기본값 설정
set_defaults("static_library") {
  configs = _default_configs
}

# source_set 타겟에 대한 기본값 설정
set_defaults("source_set") {
  configs = _default_configs
}
```

## 5. 주의사항

*   **적용 범위**: `set_defaults`는 해당 함수가 호출된 **이후에** 정의되는 타겟들에만 영향을 미칩니다. 따라서 보통 빌드 초기화 단계인 `BUILDCONFIG.gn`에서 설정합니다.
*   **사용자 정의 템플릿**: `template`으로 정의한 사용자 정의 타겟 이름에 대해서는 `set_defaults`를 직접 사용할 수 없습니다. 내장 타겟 타입(`executable`, `shared_library`, `static_library`, `source_set`, `component`, `group`)에만 적용됩니다.
