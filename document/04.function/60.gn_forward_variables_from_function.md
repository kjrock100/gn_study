# Chromium GN forward_variables_from 함수 가이드

`forward_variables_from` 함수는 한 스코프(Scope)에서 다른 스코프로 변수들을 복사하는 데 사용됩니다. 이 함수는 **템플릿(Template)**을 작성할 때, 호출자(invoker)가 전달한 변수들(`sources`, `deps` 등)을 템플릿 내부의 실제 타겟으로 전달하는 핵심적인 역할을 합니다.

## 1. 기본 문법 (Basic Syntax)

```gn
forward_variables_from(source_scope, list_of_variables_to_forward, list_of_variables_to_not_forward)
```

*   **`source_scope` (필수)**: 변수를 가져올 원본 스코프 객체입니다. 템플릿 내에서는 거의 항상 `invoker`를 사용합니다.
*   **`list_of_variables_to_forward` (필수)**: 복사할 변수 이름들의 리스트입니다. 와일드카드(`"*"`)를 사용하여 모든 변수를 지정할 수 있습니다.
*   **`list_of_variables_to_not_forward` (선택 사항)**: `"*"`를 사용했을 때, 복사에서 제외할 변수들의 리스트입니다.

## 2. 사용 예시 (Usage Examples)

### 2.1. 모든 변수 전달

가장 일반적인 사용법으로, 호출자가 정의한 모든 변수를 내부 타겟으로 그대로 전달합니다.

```gn
template("my_source_set") {
  source_set(target_name) {
    # invoker의 모든 변수를 이 source_set 스코프로 복사
    forward_variables_from(invoker, "*")
  }
}

# 사용
my_source_set("lib") {
  sources = [ "lib.cc" ]
  deps = [ "//base" ]
  visibility = [ ":*" ]
}
```

### 2.2. 특정 변수만 전달

템플릿이 허용하는 변수를 명시적으로 제한하고 싶을 때 사용합니다.

```gn
template("my_simple_executable") {
  executable(target_name) {
    # sources와 deps 변수만 전달받음
    forward_variables_from(invoker, [
      "sources",
      "deps",
    ])
  }
}
```

### 2.3. 특정 변수 제외하고 전달

템플릿 내부에서 특별히 처리해야 하는 변수를 제외하고 나머지는 모두 전달할 때 유용합니다.

```gn
template("my_test") {
  executable(target_name) {
    # test_runner_script 변수는 내부에서 처리하므로 전달에서 제외
    forward_variables_from(invoker, "*", [ "test_runner_script" ])

    if (defined(invoker.test_runner_script)) {
      args = [ "--runner=${invoker.test_runner_script}" ]
    }
  }
}
```

## 3. 주의사항

*   **변수 덮어쓰기 오류**: `forward_variables_from`은 대상 스코프에 이미 존재하는 변수를 덮어쓰려고 하면 오류를 발생시킵니다. 따라서 보통 타겟 정의 블록의 **가장 첫 줄**에 작성하여, 다른 변수가 할당되기 전에 실행되도록 합니다.
*   **복사 동작**: 이 함수는 변수를 참조하는 것이 아니라 값을 **복사**합니다.
*   **비공개 변수 제외**: 원본 스코프에서 밑줄(`_`)로 시작하는 비공개 변수는 전달되지 않습니다.
