# Chromium GN label_matches 함수 가이드

`label_matches` 함수는 주어진 타겟 라벨(Target Label)이 특정 패턴 목록 중 하나와 일치하는지 확인하는 데 사용됩니다. 주로 `assert` 문이나 조건문에서 특정 타겟에 대한 제약 조건을 검사할 때 유용합니다.

## 1. 기본 문법 (Basic Syntax)

```gn
is_match = label_matches(target_label, patterns)
```

*   **`target_label`**: 검사할 타겟 라벨 문자열입니다. (예: `//base:base`)
*   **`patterns`**: 매칭할 패턴 문자열들의 리스트입니다. 와일드카드(`*`)를 사용할 수 있습니다.
*   **반환값**: 라벨이 패턴 중 하나라도 일치하면 `true`, 아니면 `false`를 반환합니다.

## 2. 사용 예시 (Usage Examples)

### 2.1. 타겟 위치 제약 확인

특정 템플릿이 특정 디렉토리 하위에서만 사용되도록 강제하고 싶을 때 사용할 수 있습니다.

```gn
template("my_restricted_target") {
  # 현재 타겟의 전체 라벨을 가져옴
  _full_label = get_label_info(":$target_name", "label_no_toolchain")

  # 이 타겟은 //foo 또는 //bar 디렉토리 하위에서만 정의될 수 있음
  assert(label_matches(_full_label, [ "//foo/*", "//bar/*" ]),
         "$_full_label can only be defined in //foo or //bar")
  
  executable(target_name) {
    # ...
  }
}
```

### 2.2. 조건부 로직

라벨 이름에 따라 다른 설정을 적용할 때 사용합니다.

```gn
# 현재 타겟 이름이 "_unittest"로 끝나는지 확인
if (label_matches(":$target_name", [ "*_unittest" ])) {
  testonly = true
}
```

## 3. 패턴 규칙 (Pattern Rules)

`label_matches`는 `filter_labels_include`와 동일한 패턴 매칭 규칙을 따릅니다.

*   **`//foo:bar`**: 정확히 일치하는 라벨.
*   **`//foo:b*`**: `//foo` 디렉토리 내에서 `b`로 시작하는 타겟.
*   **`//foo/*`**: `//foo` 디렉토리 내의 모든 타겟.
*   **`//foo/*:bar`**: `//foo` 하위의 모든 디렉토리에서 이름이 `bar`인 타겟.

## 4. `filter_labels_include`와의 차이점

*   **`label_matches`**: **단일 라벨**에 대해 매칭 여부(`true`/`false`)를 반환합니다. 흐름 제어(`if`)나 검증(`assert`)에 사용됩니다.
*   **`filter_labels_include`**: **라벨 리스트**를 입력받아 매칭되는 것들만 남긴 **새 리스트**를 반환합니다. `deps` 리스트 등을 가공할 때 사용됩니다.
