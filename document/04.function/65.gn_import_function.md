# Chromium GN import 함수 가이드

GN(Generate Ninja)에서 `import` 함수는 다른 파일(`.gni`)에 정의된 변수, 템플릿, 설정 등을 현재 파일의 스코프로 가져오는 데 사용됩니다. 이는 코드 재사용과 모듈화를 위한 핵심 기능입니다.

## 1. 기본 문법 (Basic Syntax)

`import` 함수는 파일 경로를 문자열 인자로 받습니다.

```gn
import("//build/config/compiler/compiler.gni")
import("my_locals.gni")
```

*   **절대 경로 (`//`)**: 소스 루트(Source Root)를 기준으로 합니다. 가장 권장되는 방식입니다.
*   **상대 경로**: 현재 파일의 위치를 기준으로 합니다.

## 2. 작동 방식 (How it works)

`import`가 실행되면, GN은 지정된 파일을 읽고 실행합니다. 그 결과로 생성된 변수와 템플릿들이 `import`를 호출한 파일의 현재 스코프로 복사됩니다.

*   **캐싱**: 동일한 파일이 여러 번 `import` 되더라도, GN은 해당 파일을 한 번만 처리하고 결과를 재사용합니다. 따라서 성능 저하를 걱정하지 않아도 됩니다.
*   **동기 실행**: `import`는 즉시 실행되므로, 임포트된 파일의 변수를 바로 다음 줄에서 사용할 수 있습니다.

## 3. 변수 가시성 (Variable Visibility)

`.gni` 파일 내의 모든 변수가 임포트되는 것은 아닙니다. GN은 밑줄(`_`)로 시작하는 변수를 **비공개(Private)**로 취급합니다.

### 예제

```gn
# //tools/my_tools.gni

# 공개 변수 (Exported)
default_tool_version = "1.0"

# 비공개 변수 (Private)
_internal_helper_path = "/usr/bin/helper"

template("my_tool") {
  # 템플릿 내부에서는 비공개 변수 사용 가능
  print(_internal_helper_path)
  # ...
}
```

```gn
# //app/BUILD.gn
import("//tools/my_tools.gni")

print(default_tool_version)  # "1.0"
my_tool("app") { ... }       # 템플릿 사용 가능

# print(_internal_helper_path) # Error! 정의되지 않은 변수
```

## 4. 주요 사용 사례 (Use Cases)

### 4.1. 템플릿 공유
여러 `BUILD.gn` 파일에서 공통으로 사용하는 커스텀 타겟 규칙(Template)을 `.gni` 파일에 정의하고 공유합니다.

### 4.2. 빌드 인자 공유 (`declare_args`)
프로젝트 전반에 걸쳐 사용되는 빌드 인자를 한곳에서 관리합니다.

```gn
# //build/config/features.gni
declare_args() {
  enable_vr = false
}
```

### 4.3. 공통 설정 변수
컴파일러 플래그나 경로 등을 변수에 담아 공유합니다.

## 5. 모범 사례 (Best Practices)

*   **확장자**: 임포트 전용 파일은 `.gni` (GN Import) 확장자를 사용해야 합니다. `BUILD.gn` 파일은 `import` 하지 않는 것이 원칙입니다.
*   **순환 참조 방지**: A가 B를 임포트하고 B가 A를 임포트하는 순환 참조(Circular dependency)는 에러를 유발하므로 피해야 합니다.
*   **경로 사용**: 가독성과 유지보수를 위해 가능한 소스 루트 기준 절대 경로(`//...`)를 사용하는 것이 좋습니다.
