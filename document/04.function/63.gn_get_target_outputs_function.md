# Chromium GN get_target_outputs 함수 가이드

`get_target_outputs` 함수는 특정 타겟이 생성하는 출력 파일들의 목록을 반환합니다. 주로 `action`이나 `copy` 타겟이 생성한 파일들을 다른 타겟의 입력(`sources`)으로 사용하거나, 후속 처리를 위해 파일 목록을 가져올 때 유용합니다.

## 1. 기본 문법 (Basic Syntax)

```gn
output_files = get_target_outputs(target_label)
```

*   **`target_label`**: 출력 파일을 조회할 타겟의 라벨입니다.
*   **반환값**: 출력 파일 경로(문자열)들의 리스트입니다.

## 2. 사용 조건 (Prerequisites)

이 함수를 사용할 때는 중요한 제약 사항이 있습니다.

*   **정의 순서**: 참조하려는 타겟은 `get_target_outputs`가 호출되기 **이전에** 정의되어 있어야 합니다.
*   **파일 범위**: 일반적으로 **동일한 `BUILD.gn` 파일 내**에 정의된 타겟에 대해서만 동작합니다.

## 3. 사용 예시 (Usage Examples)

### 3.1. 스크립트 생성 파일을 소스로 사용하기

`action` 타겟이 코드를 생성하고, 이를 `source_set`에서 컴파일하는 패턴입니다.

```gn
# 1. 코드 생성 타겟
action("generate_my_code") {
  script = "gen.py"
  outputs = [ "$target_gen_dir/my_code.cc", "$target_gen_dir/my_code.h" ]
  # ...
}

# 2. 생성된 파일 목록 가져오기
generated_files = get_target_outputs(":generate_my_code")

# 3. 컴파일 타겟
source_set("my_lib") {
  # 생성된 파일들을 소스로 지정
  sources = generated_files
  
  # 생성 타겟이 먼저 실행되도록 의존성 추가 (필수!)
  deps = [ ":generate_my_code" ]
}
```

### 3.2. 특정 파일만 필터링하여 사용하기

타겟이 여러 종류의 파일을 생성할 때, `filter_include` 등을 사용하여 특정 확장자만 골라내어 사용할 수 있습니다.

```gn
cc_files = filter_include(get_target_outputs(":process_data"), [ "*.cc" ])
```

## 4. 타겟 유형별 반환값

*   **`action`, `copy`, `action_foreach`**: `outputs` 변수에 명시된 파일 목록을 반환합니다.
*   **`executable`, `shared_library`, `static_library`, `loadable_module`**: 최종적으로 생성되는 메인 바이너리 파일(들)의 경로를 반환합니다. (예: `foo.exe`, `libfoo.so`)
*   **`source_set`, `group`**: **빈 리스트**를 반환합니다. 이 타겟들은 단일 출력 파일(아티팩트)을 생성하지 않기 때문입니다.

## 5. 주의사항

*   **의존성 명시**: `get_target_outputs`로 파일 목록을 가져와 `sources`에 넣었다고 해서 의존성이 자동으로 생기는 것은 아닙니다. 반드시 `deps`에 해당 타겟을 추가해야 올바른 빌드 순서가 보장됩니다.
*   **경로 처리**: 반환된 경로는 GN 내부적으로 처리 가능한 형식이지만, 다른 스크립트의 인자로 넘길 때는 `rebase_path`를 사용하여 경로 기준을 명확히 하는 것이 좋습니다.
