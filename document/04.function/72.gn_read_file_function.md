# Chromium GN read_file 함수 가이드

`read_file` 함수는 **GN 생성 시간(Gen-time)**에 텍스트 파일을 읽어 그 내용을 GN 변수로 가져오는 데 사용됩니다. 버전 파일, 설정 파일, 또는 파일 목록 등을 읽어 빌드 로직에 반영할 때 유용합니다.

## 1. 기본 문법 (Basic Syntax)

```gn
content = read_file(file_path, input_conversion)
```

*   **`file_path`**: 읽을 파일의 경로입니다. 소스 루트(`//`) 기준 절대 경로나 현재 디렉토리 기준 상대 경로를 사용할 수 있습니다.
*   **`input_conversion`**: 파일 내용을 어떻게 변환할지 지정하는 문자열입니다.

## 2. 입력 변환 모드 (Input Conversion)

`exec_script`와 동일한 변환 모드를 지원합니다.

*   `"list lines"`: 파일의 각 줄을 문자열 리스트로 변환합니다. (빈 줄은 무시될 수 있음)
*   `"scope"`: 파일 내용을 GN 문법의 스코프(Scope)로 파싱합니다.
*   `"string"`: 파일 전체를 하나의 문자열로 반환합니다.
*   `"trim string"`: 파일 전체를 문자열로 반환하되, 양 끝의 공백(줄바꿈 포함)을 제거합니다.
*   `"value"`: 파일 내용을 GN 값(리스트, 문자열, 정수 등)으로 파싱합니다.
*   `"json"`: JSON 형식으로 파싱하여 GN 값(Scope 또는 List)으로 변환합니다.

## 3. 사용 예시 (Usage Examples)

### 3.1. 버전 파일 읽기

버전 정보가 담긴 파일을 읽어 변수에 저장하는 가장 흔한 패턴입니다.

```gn
# VERSION 파일 내용: 1.2.3
version = read_file("VERSION", "trim string")

defines = [ "MY_VERSION=\"$version\"" ]
```

### 3.2. 파일 목록 읽기

외부 스크립트나 도구가 생성한 파일 목록 텍스트 파일을 읽어 `sources` 리스트로 사용합니다.

```gn
# files.txt 내용:
# src/a.cc
# src/b.cc
my_sources = read_file("files.txt", "list lines")

source_set("my_lib") {
  sources = my_sources
}
```

### 3.3. JSON 설정 읽기

JSON 설정 파일을 읽어 빌드 로직을 제어합니다.

```gn
# config.json 내용: { "use_feature_x": true }
config = read_file("config.json", "json")

if (config.use_feature_x) {
  defines = [ "FEATURE_X_ENABLED" ]
}
```

## 4. 주의사항

*   **자동 의존성 추가**: `read_file`로 읽은 파일은 GN 빌드 파일의 의존성으로 자동 추가됩니다. 즉, 이 파일의 내용이 변경되면 다음 빌드 시 GN이 자동으로 다시 실행(Regeneration)되어 변경 사항을 반영합니다.
*   **동기 실행**: 파일 읽기는 동기적으로 수행되므로, 매우 큰 파일을 읽으면 GN 실행 속도가 느려질 수 있습니다.
