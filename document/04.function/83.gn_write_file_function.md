# Chromium GN write_file 함수 가이드

`write_file` 함수는 **GN 생성 시간(Gen-time)**에 주어진 데이터를 파일로 쓰는 데 사용됩니다. `generated_file` 타겟과 유사한 기능을 하지만, `write_file`은 함수 호출이므로 `if` 문이나 `foreach` 반복문 내에서 동적으로 파일을 생성할 때 더 유연하게 사용할 수 있습니다.

## 1. 기본 문법 (Basic Syntax)

```gn
write_file(file_path, data, output_conversion)
```

*   **`file_path` (필수)**: 생성할 파일의 경로입니다. 빌드 출력 디렉토리(`root_out_dir`) 내부에 위치해야 합니다.
*   **`data` (필수)**: 파일에 쓸 내용입니다. 단일 문자열 또는 문자열 리스트일 수 있습니다.
*   **`output_conversion` (선택 사항)**: `data`가 리스트일 경우, 어떻게 파일로 변환할지 지정합니다.
    *   `"list lines"`: 리스트의 각 요소를 한 줄씩 씁니다. (기본값)
    *   생략하거나 다른 값을 지정하면, 리스트가 GN의 리스트 문법 형식(예: `[ "a", "b" ]`)으로 쓰여집니다.

## 2. 사용 예시 (Usage Examples)

### 2.1. 간단한 텍스트 파일 생성

```gn
write_file("$target_gen_dir/message.txt", "Hello, GN!")
```

### 2.2. 리스트를 줄 단위로 쓰기

```gn
my_list = [
  "line 1",
  "line 2",
]
write_file("$target_gen_dir/list.txt", my_list, "list lines")
```

**`list.txt` 파일 내용:**
```text
line 1
line 2
```

### 2.3. 반복문 내에서 여러 파일 생성

`foreach` 반복문과 함께 사용하여 여러 개의 설정 파일을 동적으로 생성할 수 있습니다.

```gn
configs = [
  {
    name = "config_a"
    value = 1
  },
  {
    name = "config_b"
    value = 2
  },
]

foreach(c, configs) {
  write_file("$target_gen_dir/${c.name}.txt", "value = ${c.value}")
}
```

## 3. `generated_file`과의 차이점

*   **`write_file`**: 함수 호출이므로 제어문(`if`, `foreach`) 내에서 사용할 수 있어 동적인 파일 생성에 유리합니다. 하지만 이 함수로 생성된 파일은 빌드 그래프에 자동으로 포함되지 않으므로, `action` 타겟의 `inputs` 등으로 명시해야 할 수 있습니다.
*   **`generated_file`**: 타겟이므로 빌드 그래프의 일부가 됩니다. 의존성 관리가 더 명확하며, 메타데이터 수집과 같은 복잡한 기능을 제공합니다.

일반적으로 정적인 파일을 생성할 때는 `generated_file`을, 동적으로 여러 파일을 생성해야 할 때는 `write_file`을 사용하는 것이 좋습니다.

## 4. 주의사항

*   **자동 의존성**: `write_file`은 `read_file`과 달리, 생성된 파일을 빌드 의존성에 자동으로 추가하지 않습니다. 이 파일이 다른 타겟의 입력으로 필요하다면, 해당 타겟의 `inputs`나 `sources`에 명시적으로 추가해야 합니다.
*   **출력 경로**: 출력 파일 경로는 반드시 빌드 디렉토리 내부에 있어야 합니다. 소스 트리에 직접 파일을 쓰는 것은 허용되지 않습니다.
