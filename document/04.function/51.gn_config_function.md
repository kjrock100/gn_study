# Chromium GN Config 함수 가이드

`config` 함수는 컴파일러 플래그, 전처리기 정의(Defines), 헤더 포함 경로(Include dirs) 등을 명명된 객체로 정의하여, 여러 타겟에서 재사용할 수 있게 해주는 기능입니다. 이를 통해 빌드 설정을 모듈화하고 중복을 줄일 수 있습니다.

## 1. 기본 구조 (Basic Structure)

```gn
config("my_config") {
  include_dirs = [ "include" ]
  defines = [ "ENABLE_MY_FEATURE" ]
  cflags = [ "-Wall" ]
}
```

## 2. 주요 변수 (Key Variables)

`config` 블록 내부에서 사용할 수 있는 주요 변수들입니다. 이 변수들은 해당 config가 적용된 타겟의 컴파일/링크 단계에 영향을 줍니다.

*   **`cflags`**: C/C++ 컴파일러 공통 플래그.
*   **`cflags_c`**: C 컴파일러 전용 플래그.
*   **`cflags_cc`**: C++ 컴파일러 전용 플래그.
*   **`defines`**: 전처리기 매크로 정의 (`-DNAME` 또는 `-DNAME=VALUE`).
*   **`include_dirs`**: 헤더 파일 검색 경로 (`-Ipath`).
*   **`ldflags`**: 링커 플래그.
*   **`libs`**: 링크할 시스템 라이브러리.
*   **`lib_dirs`**: 라이브러리 검색 경로 (`-Lpath`).

## 3. 설정 적용 (Applying Configs)

타겟을 정의할 때 `configs` 리스트 변수를 사용하여 정의된 config를 적용합니다.

### 3.1. 추가 (Adding)
대부분의 타겟은 툴체인이나 `set_defaults`에 의해 기본 설정 목록을 가지고 있습니다. `+=` 연산자를 사용하여 사용자 정의 설정을 추가합니다.

```gn
executable("my_app") {
  sources = [ "main.cc" ]
  configs += [ ":my_config" ]
}
```

### 3.2. 제거 (Removing)
기본 설정 중 특정 플래그가 충돌하거나 불필요한 경우 `-=` 연산자로 제거할 수 있습니다.

```gn
source_set("no_warn_code") {
  sources = [ "legacy.cc" ]
  # 엄격한 경고 설정을 제거
  configs -= [ "//build/config/compiler:chromium_code" ]
}
```

## 4. 공개 설정 (Public Configs)

`public_configs`는 현재 타겟을 의존(`deps`)하는 **다른 타겟**들에게 설정을 전파할 때 사용합니다.

*   **용도**: 라이브러리의 헤더 파일이 위치한 경로(`include_dirs`)나, 라이브러리 사용 시 필요한 매크로(`defines`)를 사용하는 쪽에 자동으로 적용하고 싶을 때 필수적입니다.

```gn
# 라이브러리 정의
static_library("mylib") {
  sources = [ "mylib.cc" ]
  # 이 라이브러리를 사용하는 타겟에게 mylib_config를 적용함
  public_configs = [ ":mylib_config" ]
}

config("mylib_config") {
  # mylib.h가 있는 디렉토리
  include_dirs = [ "include" ] 
}
```

## 5. 주의사항

*   **순서**: `configs` 리스트의 순서는 중요합니다. 나중에 오는 설정이 이전 설정의 플래그를 덮어쓰거나(컴파일러 동작에 따라 다름), 순서에 의존적인 플래그(include path 검색 순서 등)에 영향을 줄 수 있습니다.
*   **스코프**: `config`는 타겟과 마찬가지로 정의된 파일 내에서 유효하며, 다른 파일에서 사용하려면 라벨(`//path/to:config_name`)을 사용해야 합니다.
